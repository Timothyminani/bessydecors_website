import{b as r,a as e,o as a,f as u,j as M,u as H,i as Q,k as R,c as G,w as V,l as k,n as x,t as n,m as _,q as d,v as g,x as C,F as D,r as S,y as J,p as W,z as X,d as U,s as A}from"./app-Du4UQDmJ.js";import{_ as Y}from"./AdminLayout-5yX7yqMS.js";import{r as $}from"./CloudArrowUpIcon-ClpdlorA.js";/* empty css            */import"./ShoppingBagIcon-DC7Kbkyj.js";function Z(j,v){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const ee={class:"p-6 bg-white shadow rounded-lg"},te={key:0,class:"bg-green-100 text-green-800 p-3 rounded mb-4"},se={class:"w-full"},le={class:"flex items-center justify-between mb-4"},oe={class:"overflow-y-auto max-h-[500px] rounded-lg"},ae={class:"min-w-full table-fixed divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-200"},re={class:"px-4 py-2"},ie=["src"],de={class:"px-4 py-2 whitespace-nowrap"},ue={class:"px-4 py-2 whitespace-nowrap"},pe={class:"px-4 py-2 truncate"},ce={class:"px-4 py-2 whitespace-nowrap"},ge={class:"px-4 py-2 whitespace-nowrap"},me={key:0},fe={key:1,class:"text-gray-400"},xe={class:"px-4 py-2 whitespace-nowrap"},ye={class:"px-4 py-2 whitespace-nowrap"},be={class:"px-4 py-2 whitespace-nowrap"},ve={key:0,class:"text-yellow-500 font-bold"},we={key:1,class:"text-gray-300"},he={class:"px-4 py-2 whitespace-nowrap"},ke=["onClick"],_e=["onClick"],Ce={key:0,class:"fixed inset-0 bg-gray-900/80 flex items-center justify-center z-50"},De={class:"bg-white w-full max-w-2xl rounded-lg shadow-lg p-6 relative overflow-y-scroll max-h-[90vh] no-scrollbar"},Se={class:"flex justify-center items-center p-2"},Ae={class:"text-xl font-bold"},Pe={class:"flex items-center gap-2"},Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Me={class:"block text-gray-700 font-semibold mb-1"},Ve=["onClick"],Ue={class:"text-gray-600 mt-2"},$e=["onChange"],je={type:"submit",class:"w-full bg-black font-semibold text-white py-2 rounded-lg mt-4 hover:bg-gray-700"},Ee={key:1,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50"},Ne={class:"bg-white w-full max-w-md p-6 rounded-xl shadow-xl relative"},Oe={class:"text-gray-700 mt-3"},Te={class:"font-semibold"},qe={__name:"Products",setup(j){const v=u(""),P=u(""),c=u(!1),m=u(!1),w=u(null),y=u(!1),f=u(null),s=M({name:"",category:"",description:"",price:"",discount:"",status:"Available",tags:"",featured:!1,images:[null,null,null]}),i=M(["","",""]),E=(o,t)=>{const l=o.target.files[0];l&&(s.images[t]=l,i[t]=l.name)};function N(){const o=new FormData;o.append("name",s.name),o.append("category",s.category),o.append("description",s.description),o.append("price",s.price),o.append("discount",s.discount),o.append("status",s.status),o.append("tags",s.tags),o.append("featured",s.featured?1:0),s.images.forEach(t=>{t&&o.append("images[]",t)}),A.post("/admin/products/store",o,{forceFormData:!0,onSuccess:()=>{c.value=!1,s.name="",s.category="",s.description="",s.price="",s.discount="",s.status="Available",s.tags="",s.featured=!1,s.images=[null,null,null],i[0]="",i[1]="",i[2]=""}})}const b=H(),h=u(!1);Q(()=>b.props.flash?.success,o=>{o&&(h.value=!0,setTimeout(()=>h.value=!1,4e3))});const O=R(()=>b.props.products);function T(o){m.value=!0,w.value=o.id,s.name=o.name,s.category=o.category,s.description=o.description,s.price=o.price,s.discount=o.discount,s.status=o.status,s.tags=o.tags?.join(", ")||"",s.featured=o.featured,i[0]=o.image_1?.split("/").pop()||"",i[1]=o.image_2?.split("/").pop()||"",i[2]=o.image_3?.split("/").pop()||"",c.value=!0}function B(){m.value?z():N()}function z(){const o=new FormData;o.append("name",s.name),o.append("category",s.category),o.append("description",s.description),o.append("price",s.price),o.append("discount",s.discount),o.append("status",s.status),o.append("tags",s.tags),o.append("featured",s.featured?1:0),s.images.forEach(t=>{t&&o.append("images[]",t)}),A.post(`/admin/products/${w.value}/update`,o,{forceFormData:!0,onSuccess:()=>{c.value=!1,F(),m.value=!1,w.value=null}})}const I=()=>{c.value=!1,F()};function F(){s.name="",s.category="",s.description="",s.price="",s.discount="",s.status="Available",s.tags="",s.featured=!1,s.images=[null,null,null],i[0]="",i[1]="",i[2]=""}function K(o){y.value=!0,f.value=o}function L(){f.value&&A.delete(`/admin/products/${f.value.id}`,{onSuccess:()=>{y.value=!1,f.value=null}})}function q(){y.value=!1}return(o,t)=>(a(),G(Y,null,{nav:V(()=>[...t[11]||(t[11]=[e("h1",{class:"text-3xl font-bold"},"Product Dashboard",-1)])]),main:V(()=>[e("div",ee,[h.value&&x(b).props.flash?.success?(a(),r("div",te,n(x(b).props.flash.success),1)):k("",!0),e("div",se,[e("button",{onClick:t[0]||(t[0]=l=>c.value=!0),class:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gary-700 mb-10 font-semibold flex items-center"},[_(x($),{class:"w-7 h-7 inline-block mr-2"}),t[12]||(t[12]=e("span",null,"Upload New Product",-1))])]),e("div",le,[d(e("input",{type:"text",placeholder:"Search products...",class:"w-1/3 px-3 py-2 border rounded-lg focus:ring focus:ring-blue-200","onUpdate:modelValue":t[1]||(t[1]=l=>v.value=l)},null,512),[[g,v.value]]),e("div",null,[d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>P.value=l),class:"px-3 py-2 border rounded-lg bg-white focus:ring focus:ring-blue-200"},[...t[13]||(t[13]=[e("option",{value:""},"All Products",-1),e("option",{value:"Available"},"Available",-1),e("option",{value:"Out of Stock"},"Out of Stock",-1),e("option",{value:"Archived"},"Archived",-1)])],512),[[C,P.value]])])]),e("div",oe,[e("table",ae,[t[14]||(t[14]=e("thead",{class:"bg-gray-50 sticky top-0 z-10"},[e("tr",null,[e("th",{class:"w-14 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Image"),e("th",{class:"w-36 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Name"),e("th",{class:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),e("th",{class:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Price"),e("th",{class:"w-20 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Discount"),e("th",{class:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Tags"),e("th",{class:"w-20 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Featured"),e("th",{class:"w-32 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",ne,[(a(!0),r(D,null,S(O.value,l=>(a(),r("tr",{key:l.id+l.name,class:"hover:bg-gray-50"},[e("td",re,[e("img",{src:`/storage/${l.image_1}`,alt:"",class:"w-14 h-14 object-cover rounded"},null,8,ie)]),e("td",de,n(l.name),1),e("td",ue,n(l.category),1),e("td",pe,n(l.description),1),e("td",ce,"KES "+n(l.price.toLocaleString()),1),e("td",ge,[l.discount?(a(),r("span",me,n(l.discount)+"%",1)):(a(),r("span",fe,"-"))]),e("td",xe,[e("span",{class:J({"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs":l.status==="Available","bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs":l.status==="Out of Stock","bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs":l.status==="Archived"})},n(l.status),3)]),e("td",ye,[(a(!0),r(D,null,S(l.tags,p=>(a(),r("span",{key:p,class:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs mr-1"},n(p),1))),128))]),e("td",be,[l.featured?(a(),r("span",ve,"★")):(a(),r("span",we,"☆"))]),e("td",he,[e("button",{class:"text-white mr-2 py-1 px-3 bg-blue-600 hover:bg-blue-400 rounded",onClick:p=>T(l)},"Edit",8,ke),e("button",{class:"text-white py-1 px-3 bg-red-600 hover:bg-red-400 rounded",onClick:p=>K(l)},"Delete",8,_e)])]))),128))])])])]),c.value?(a(),r("div",Ce,[e("div",De,[e("div",Se,[e("h2",Ae,n(m.value?"Edit Product":"Upload New Product"),1),e("button",{onClick:I,class:"absolute hover:border right-10 text-gray-500 hover:text-black"},[_(x(Z),{class:"w-6 h-6"})])]),e("form",{class:"space-y-4",onSubmit:W(B,["prevent"]),enctype:"multipart/form-data"},[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-gray-700 font-semibold mb-1"},"Product Name",-1)),d(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>s.name=l),class:"w-full border rounded-lg px-3 py-2"},null,512),[[g,s.name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-gray-700 font-semibold mb-1"},"Category",-1)),d(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.category=l),class:"w-full border rounded-lg px-3 py-2"},[...t[16]||(t[16]=[e("option",null,"Living Room",-1),e("option",null,"Office",-1),e("option",null,"Dining",-1),e("option",null,"Kitchen",-1),e("option",null,"Bedroom",-1),e("option",null,"Outdoor",-1),e("option",null,"Kids",-1),e("option",null,"Home Décor & Storage",-1)])],512),[[C,s.category]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-gray-700 font-semibold mb-1"},"Status",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.status=l),class:"w-full border rounded-lg px-3 py-2"},[...t[18]||(t[18]=[e("option",{value:"Available"},"Available",-1),e("option",{value:"Out of Stock"},"Out of Stock",-1),e("option",{value:"Archived"},"Archived",-1)])],512),[[C,s.status]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-gray-700 font-semibold mb-1"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.description=l),class:"w-full border rounded-lg px-3 py-2",rows:"3"},null,512),[[g,s.description]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-gray-700 font-semibold mb-1"},"Price (KES)",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.price=l),type:"number",class:"w-full border rounded-lg px-3 py-2"},null,512),[[g,s.price]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-gray-700 font-semibold mb-1"},"Discount (%)",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>s.discount=l),type:"number",class:"w-full border rounded-lg px-3 py-2"},null,512),[[g,s.discount]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-gray-700 font-semibold mb-1"},"Tags (comma separated)",-1)),d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>s.tags=l),type:"text",class:"w-full border rounded-lg px-3 py-2",placeholder:"sofa, wood, modern"},null,512),[[g,s.tags]])]),e("div",Pe,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=l=>s.featured=l),id:"featured",class:"h-4 w-4"},null,512),[[X,s.featured]]),t[24]||(t[24]=e("label",{for:"featured",class:"text-gray-700"},"Mark as Featured",-1))]),e("div",Fe,[(a(),r(D,null,S(3,l=>e("div",{key:l},[e("label",Me," Product Image "+n(l),1),e("div",{class:"border border-dashed rounded-lg p-4 text-center bg-gray-50 cursor-pointer",onClick:p=>o.$refs["imageInput"+l][0].click()},[_(x($),{class:"w-10 h-10 mx-auto text-gray-500"}),e("p",Ue,n(i[l-1]||"Click to upload image"),1),e("input",{type:"file",class:"hidden",ref_for:!0,ref:"imageInput"+l,onChange:p=>E(p,l-1)},null,40,$e)],8,Ve)])),64))]),e("button",je,n(m.value?"Update Product":"Save Product"),1)],32)])])):k("",!0),y.value?(a(),r("div",Ee,[e("div",Ne,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold text-red-600"},"Delete Product",-1)),e("p",Oe,[t[25]||(t[25]=U(" Are you sure you want to delete ",-1)),e("span",Te,n(f.value?.name),1),t[26]||(t[26]=U("? This action cannot be undone. ",-1))]),e("div",{class:"mt-6 flex justify-end gap-3"},[e("button",{class:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",onClick:q}," Cancel "),e("button",{class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",onClick:L}," Delete ")])])])):k("",!0)]),_:1}))}};export{qe as default};
